<chapter id="admin.install">
    <title>Installation</title>

    <para>Following are the steps for a new MantisBT installation:</para>
    <itemizedlist>
        <listitem>
            <para>
                <link linkend="admin.about.download">Download</link>
                Mantis
            </para>
        </listitem>
        <listitem>
            <para>
                Go through MantisBT <link linkend="admin.config">Configuration</link>
                and set the database options + whatever options where you need to
                override the default values.
            </para>
        </listitem>
        <listitem>
            <para>Test your configuration through the admin
                folder
            </para>
        </listitem>
        <listitem>
            <para>Create a new administrator account and remove the
                standard user 'administrator'
            </para>
        </listitem>
    </itemizedlist>

    <section id="admin.install.summary">
        <title>Summary</title>

        <orderedlist>
            <listitem>
                <para>Transfer files</para>
            </listitem>
            <listitem>
                <para>Uncompress files</para>
            </listitem>
            <listitem>
                <para>Generate database tables</para>
            </listitem>
            <listitem>
                <para>Edit configuration file, if needed</para>
            </listitem>
            <listitem>
                <para>PHP File extensions</para>
            </listitem>
            <listitem>
                <para>Login</para>
            </listitem>
            <listitem>
                <para>Add projects and users</para>
            </listitem>
        </orderedlist>
    </section>


        <section id="admin.install.new">
            <title>New Installations</title>

            <orderedlist>
                <listitem>
					<para>First, transfer the downloaded file to your webserver
						using whatever method you like best (ftp, scp, etc). You
						will need to telnet/ssh into the server machine for the
						next steps.
                    </para>
                </listitem>
                <listitem>
                    <para>Next, untar/gunzip it to the directory that you want.The
                        usual command is (1 step):
						<programlisting>tar -xzf <emphasis>filename.tar.gz</emphasis></programlisting>
                        OR (2 steps):
						<programlisting>
gunzip <emphasis>filename.tar.gz</emphasis>
tar -xf <emphasis>filename.tar</emphasis>
</programlisting>
                        Winzip, Stuffit, and other programs should also be able to
                        handle decompression of the archive. At this point you may want to
                        rename the directory to something simpler like 'mantisbt'. You will
                        use the mv command to rename a directory (Windows users substitute
                        the "ren" command or use explorer).
						<programlisting>mv <emphasis>directoryname</emphasis> mantisbt</programlisting>
                    </para>
                </listitem>
                <listitem>
					<para>Next we will create the necessary database tables and a
						basic configuration file. From your web browser, access
					</para>
					<programlisting>http://yoursite/mantisbt/admin/install.php</programlisting>
					<para>This page will walk you through the following steps:

                        <orderedlist>
                            <listitem>
                                <para>check basic parameters for the web server</para>
                            </listitem>
                            <listitem>
                                <para>prompt for the database type and location, and a database
                                    user/password pair. For installation, a high-privileged account
                                    can also be provided. If unspecified, the database user will be
                                    used.
                                    The database user requires SELECT, INSERT, UPDATE, and DELETE privileges.
                                    For installation, additional INDEX, CREATE, ALTER, and DROP privileges
                                    are also required.
                                </para>
                            </listitem>
                            <listitem>
                                <para>create the database and tables.
                                    WARNING: a default Administrator user account
                                    is created at this stage, to allow the initial login
                                    and setup of MantisBT.
                                    The id and password are <emphasis>administrator / root</emphasis>.
                                    You should immediately go to Manage Users,
                                    and create another administrator level account,
                                    then either DISABLE or DELETE the default one.
                                </para>
                            </listitem>
                            <listitem>
                                <para>write a basic "config_inc.php file to define the
                                    database connection parameters.
                                </para>
                            </listitem>
                            <listitem>
                                <para>perform some post installation checks on the
                                    system.
                                </para>
                            </listitem>
                        </orderedlist>

                    </para>
                </listitem>
                <listitem>
                    <para>The next part involves configuring the installation to
                        work with your specific setup. There are many options that
                        you can set to customize your MantisBT installation. See
                        <link linkend="admin.config">Configuration</link> for
                        in depth explanations.
                    </para>
                    <para>Open the file <emphasis>config_inc.php</emphasis> in an
                        editor and add any values that are required. These will
                        override the default values.
                    </para>
                    <para>You can load up admin/check.php to validate if you set
                        things up correctly.
                        NOTE: check.php sometimes reports the value of
                        <emphasis>register_globals</emphasis> incorrectly. To
                        confirm the correct value,
                        Create a page with this line in it:
                        <programlisting>&lt;?php phpinfo(); ?&gt;</programlisting>
                        save it with a .php extension and load it up in your web browser.
                    </para>
                </listitem>

                <listitem>
                    <para>MantisBT uses only <emphasis>.php</emphasis> files. If your webserver is
                        configured for other extensions (.PHP3, .PHTML) then you will have
                        to have the administrator add support for .PHP files. This should be
                        a trivial modification. Further details can be found in the
                        <ulink url="http://www.php.net/manual/en/installation.php">PHP documentation</ulink>
                    </para>
                </listitem>

                <listitem>
                    <para>Login to your bugtracker and go to the manage section.
                        Click on the projects link. You will need to ADD a new project. Then
                        EDIT the new project and remember to ADD at least one category.
                        Otherwise you won't be able to add any issues.
                    </para>
                </listitem>
            </orderedlist>
            <para>That should be it. You're off and running.
            </para>

        </section>

        <section id="admin.install.requirements">

            <title>Requirements</title>


            <para>The following versions are required for proper operation:</para>
            <informaltable>
                <tgroup cols="3"><tbody>
                        <row>
                            <entry>Package</entry>
                            <entry>Minimum Version</entry>
                            <entry>Tested with</entry>
                        </row>
                        <row>
                            <entry>MySQL</entry>
                            <entry>4.1.x</entry>
                            <entry>5.0.x</entry>
                        </row>
                        <row>
                            <entry>PostgreSQL (experimental)</entry>
                            <entry>7.0</entry>
                            <entry>8.0</entry>
                        </row>
                        <row>
                            <entry>PHP</entry>
                            <entry>5.2.x</entry>
                            <entry>5.2.x</entry>
                        </row>
                        <row>
                            <entry>Web Server</entry>
                            <entry></entry>
                            <entry>Apache 1.3.x, Apache 2.2.x, lighttpd 1.4.x, IIS 6.0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>

            <para>MantisBT is designed in a way to work in as many environments as possible.
            Hence the required extensions are minimal and many of them are optional affecting
            only one feature.  The following PHP extensions are the ones used:</para>

            <itemizedlist>
                <listitem>
                    <para>mysqli (or the extension for the DBMS being used) - mandatory.</para>
                </listitem>
                <listitem>
                    <para>Curl - if the Twitter integration feature is required.</para>
                </listitem>
                <listitem>
                    <para>GD - if the graphs feature is required.</para>
                </listitem>
                <listitem>
                    <para>fileinfo - Guesses the MIME type of attachments.
                    This extension is included by default from version 5.3.x
                    of PHP. For older versions of PHP you will need to install
                    the fileinfo PECL extension (this requires root access to
                    the server you're using). Without this extension, file
                    attachment previews and downloads may not work correctly as
                    MantisBT won't be able to send the Content-Type header to a
                    browser requesting an attachment.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section id="admin.install.backups">

            <title>Backups</title>


            <para>It is recommended to backup your MantisBT database on a
                regular basis. This is easy to accomplish using the mysqldump
                command:
                mysqldump -u&lt;username&gt; -p&lt;password&gt; &lt;database
                name&gt; &gt; &lt;output file&gt;
                To restore a backup you will need to have a clean database. Then
                run:
                mysql -u&lt;username&gt; -p&lt;password&gt; &lt;database name&gt;
                &lt; &lt;input file&gt;
                You can also perform both of these tasks using
                <ulink url="http://www.phpmyadmin.net/">phpMyAdmin</ulink>
                A good idea is to make a backup script and run it regularly through
                cron or a task scheduler (for Windows see
                <ulink url="http://www.wincron.com/">WinCron</ulink>
                ).
                Using the current date in the filename can prevent overwriting and
                make cataloguing easier.
                !!! Backups should always be performed before an upgrade !!!
                Make sure to backup MantisBT code (which includes your configs +
                possibly customization), issue attachments / project documents, and
                database contents.
            </para>

        </section>

        <section id="admin.install.uninstall">

            <title>Uninstall</title>


            <para>
                It is recommended that you make an backup in case you wish to use
                your data in the future. See the
                <link linkend="admin.install.backups">Backups</link>
                page for details.
                To uninstall MantisBT:
                <itemizedlist>
                    <listitem>
                        <para>Delete the MantisBT directory and all files and
                            subdirectories.
                        </para>
                    </listitem>
                    <listitem>
                        <para>Drop all MantisBT tables from the database, these can be
                            identified by the configured prefix for the installation. The
                            default prefix is 'mantis'.
                        </para>
                    </listitem>
                    <listitem>
                        <para>Remove any customizations or additions that you may have
                            made.
                        </para>
                    </listitem>
                </itemizedlist>
                If you have the permissions to create/drop databases and you have a
                specific database for MantisBT that does not contain any other data,
                you can drop the whole database.
            </para>

        </section>
</chapter>
